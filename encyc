package api;

//네이버 개발자 센테 검색 api 기본 소스코드 이용
//이클립스 한글 깨짐 해결방법  Set Encoding 클릭 후 MS949로 변경 
//java코드로 특정 url에 요청보내고 응답받기, get 방식으로 전달, json 이용

import java.util.*;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.net.*;

public class naverapi {

	public static void main(String[] args) throws Exception{
		String clientID="PnIzj4L8UHHmNcThrK8C"; //네이버 개발자 센터에서 발급받은 clientID입력
        String clientSecret = "PEoPxZ9w6Y";        //네이버 개발자 센터에서 발급받은 clientSecret입력
        
        try{
        	
		System.out.print("찾고싶은 단어 입력 : ");
		
		Scanner sc = new Scanner(System.in);
		String s = sc.next(); //검색 키워드 저장
		String key = URLEncoder.encode(s,"UTF-8"); //네이버 api는 반드시 utf-8로 인코딩
		
        URL url = new URL("https://openapi.naver.com/v1/search/encyc?query="+key); //API 기본정보의 요청 url을 복사, 필수 query 입력 
        
        URLConnection urlConn=url.openConnection(); //openConnection 해당 요청에 대해서 쓸 수 있는 connection 객체 
        
        urlConn.setRequestProperty("X-Naver-Client-ID", clientID);
        urlConn.setRequestProperty("X-Naver-Client-Secret", clientSecret);
        
        BufferedReader br = new BufferedReader(new InputStreamReader(urlConn.getInputStream()));
        //연결 후 내용처리
        
        String msg = null;
        while((msg = br.readLine())!=null)
        {
            System.out.println(msg);
        }
        br.close();
		}catch (Exception e) {
			System.out.println(e);
		}
	}

}
